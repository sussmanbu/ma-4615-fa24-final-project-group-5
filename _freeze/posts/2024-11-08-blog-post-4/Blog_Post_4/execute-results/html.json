{
  "hash": "2dcaf707ce199a28b89463f489dbb33d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Blog Post 4\"\nauthor: \"Group 5\" \ndate: \"2024-10-30\"\ndate-modified: \"2024-11-08\"\ndraft: FALSE\n---\n\nOur initial exploratory data analysis involved some rudimentary breakdowns between the labor statistics and two metrics, particularly race and gender. Utilizing the provided categories of American Indigenous, Asian, Black, Hispanic, Native Hawaiian, two or more, and White, we created a facet showing the racial distributions among the job categories: 1 (senior off and managers), 2 (professionals) 3 (technicians), 4 (sales workers), 5 (clericals), 6 (craft), 7 (operatives), 8 (labors),  9 (service) and 1_2 (mid off and managers). Some more cleaning may be needed to reduce redundant or blank values, but a cursory examination shows approximate parity between various job distributions, with the exception of craft, for which distributions are more uniform. Reducing the seeming uniformity of the different charts may be a matter of controlling for the proportion of the population occupied by each race category, to get more proportionate metrics that are not overshadowed by the gross proportions of each race as represented by the total population. Additionally, a further inquiry into the exact meaning and jobs entailed by the descriptive numbers used by NAICS may be useful, as we find further data sets with descriptive statistics like wages and benefits for particular jobs that need to be linked to the very general categories described by our original dataset.\n\nWe also performed a similar breakdown by gender, although in this category it was also difficult to detect any significant discrepancies between various jobs and their gender distribution, contrary to popular notions of gender divides in certain jobs, which may warrant a further inquiry into the source and exact meaning of the data. Like with the racial breakdowns, it may also be useful to derive proportions rather than raw numbers to better account for population differences.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(tidyr)\n\n# Read data\ncleaned_data <- readRDS(\"../ma-4615-fa24-final-project-group-5/dataset/Cleaned_Employment2017.rds\")\n\n# Pivot to long format, excluding MT and FT\nlong_data <- cleaned_data %>%\n  pivot_longer(\n    cols = matches(\"^(WHT|BLKT|HISPT|ASIANT|AIANT|NHOPIT|TOMRT)([1-9]|1_2)?$\"),\n    names_to = c(\"Race\", \"JobType\"),\n    names_pattern = \"^(WHT|BLKT|HISPT|ASIANT|AIANT|NHOPIT|TOMRT)([1-9]|1_2)?$\",\n    values_to = \"Count\"\n  ) %>%\n  filter(!is.na(JobType) & !is.na(Race))\n\n# Ensure only specified Job Types are included\nvalid_job_types <- c(\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"1_2\")\nfiltered_data <- long_data %>%\n  filter(JobType %in% valid_job_types) %>%\n  mutate(\n    Count = gsub(\"[^0-9.-]\", \"\", Count),  # Clean non-numeric characters\n    Count = as.numeric(Count),            # Convert to numeric\n    Count = ifelse(is.na(Count), 0, Count) # Replace NA with 0\n  )\n\n# Plotting\nggplot(filtered_data, aes(x = Race, y = Count, fill = Race)) +\n  geom_bar(stat = \"identity\") +\n  facet_wrap(~ JobType, scales = \"free_y\") +\n  theme_gray() +\n  labs(\n    title = \"Proportional Representation by Job Type and Race\",\n    x = \"Race\",\n    y = \"Count\"\n  ) +\n  scale_y_continuous(breaks = scales::pretty_breaks(n = 5)) +\n  theme(\n    legend.position = \"none\",\n    strip.text = element_text(size = 10, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    axis.text.y = element_text(size = 8)\n  )\n```\n\n::: {.cell-output-display}\n![](Blog_Post_4_files/figure-html/p1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(long_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3,060,960 × 34\n   Nation        Region Division State CBSA  County NAICS2 NAICS2_Name NAICS3\n   <chr>         <chr>  <chr>    <chr> <chr> <chr>   <int> <chr>        <int>\n 1 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 2 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 3 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 4 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 5 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 6 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 7 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 8 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n 9 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n10 United States \"\"     \"\"       \"\"    \"\"    \"\"         NA \"\"              NA\n# ℹ 3,060,950 more rows\n# ℹ 25 more variables: NAICS3_Name <chr>, Establishments <int>, MT1 <chr>,\n#   MT2 <chr>, MT3 <chr>, MT4 <chr>, MT5 <chr>, MT6 <chr>, MT7 <chr>,\n#   MT8 <chr>, MT9 <chr>, MT1_2 <chr>, FT1 <chr>, FT2 <chr>, FT3 <chr>,\n#   FT4 <chr>, FT5 <chr>, FT6 <chr>, FT7 <chr>, FT8 <chr>, FT9 <chr>,\n#   FT1_2 <chr>, Race <chr>, JobType <chr>, Count <chr>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\n\n# Pivot to long format\nlong_data <- cleaned_data %>%\n  pivot_longer(\n    cols = matches(\"^(Male|Female|MT|FT)[1-9](_2)?$\"),\n    names_to = c(\"Gender\", \"JobType\"),\n    names_pattern = \"^(Male|Female|MT|FT)([1-9]|1_2)?$\",\n    values_to = \"Count\"\n  ) %>%\n  filter(!is.na(JobType) & !is.na(Gender))\n\n# Ensure 'Count' is numeric, handling non-numeric values\nlong_data <- long_data %>%\n  mutate(\n    Count = as.numeric(Count),             # Convert 'Count' to numeric\n    Count = ifelse(is.na(Count), 0, Count)  # Replace any NA with 0\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `Count = as.numeric(Count)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\n# Filter for valid job types\nvalid_job_types <- c(\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"1_2\")\nfiltered_data <- long_data %>%\n  filter(JobType %in% valid_job_types) %>%\n  group_by(JobType, Gender) %>%\n  mutate(\n    Total = sum(Count, na.rm = TRUE),  # Total count for each JobType\n    Percent = Count / Total * 100      # Calculate percentage\n  ) %>%\n  ungroup()\n\n# Plotting: Show percentages instead of counts\nggplot(filtered_data, aes(x = Gender, y = Percent, fill = Gender)) +\n  geom_bar(stat = \"identity\") +\n  facet_wrap(~ JobType, scales = \"free_y\") +\n  theme_gray() +\n  labs(\n    title = \"Proportional Representation by Job Type and Gender\",\n    x = \"Gender\",\n    y = \"Percentage\"\n  ) +\n  theme(\n    legend.position = \"none\",              # Remove legend\n    strip.text = element_text(size = 10, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    axis.text.y = element_text(size = 8)\n  )\n```\n\n::: {.cell-output-display}\n![](Blog_Post_4_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::",
    "supporting": [
      "Blog_Post_4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}